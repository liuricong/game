import{r as P,R as J,a as me,j as l,b as ge,C as re,L as oe,d as ie,c as ne,l as Z,e as ve,f as se,h as ae,k as $,w as ye}from"./index-CjjscxGl.js";import Ee from"./WxQrCode-BaisbeYn.js";const be="_soundItem_bjajv_25",_e="_inner_bjajv_29",Ce="_dialog_bjajv_62",we="_show_bjajv_1",xe="_errorTip_bjajv_99",je="_shake_bjajv_1",Se="_closeBtn_bjajv_103",Ne="_inputContainer_bjajv_125",Me="_label_bjajv_150",Ae="_imgPreview_bjajv_155",Re="_required_bjajv_161",Te="_tip_bjajv_166",Ie="_iconInput_bjajv_172",Pe="_iconInputGroup_bjajv_178",ke="_iconPreview_bjajv_192",Le="_divider_bjajv_200",Oe="_uploadBtn_bjajv_218",Be="_uploading_bjajv_223",Fe="_gradient_bjajv_1",De="_qrCode_bjajv_235",ze="_rotate_bjajv_1",R={soundItem:be,inner:_e,dialog:Ce,show:we,errorTip:xe,shake:je,closeBtn:Se,inputContainer:Ne,label:Me,imgPreview:Ae,required:Re,tip:Te,iconInput:Ie,iconInputGroup:Pe,iconPreview:ke,divider:Le,uploadBtn:Oe,uploading:Be,gradient:Fe,qrCode:De,rotate:ze};var Ue=Object.defineProperty,ee=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,le=(_,a,v)=>a in _?Ue(_,a,{enumerable:!0,configurable:!0,writable:!0,value:v}):_[a]=v,ce=(_,a)=>{for(var v in a||(a={}))fe.call(a,v)&&le(_,v,a[v]);if(ee)for(var v of ee(a))de.call(a,v)&&le(_,v,a[v]);return _},He=(_,a)=>{var v={};for(var f in _)fe.call(_,f)&&a.indexOf(f)<0&&(v[f]=_[f]);if(_!=null&&ee)for(var f of ee(_))a.indexOf(f)<0&&de.call(_,f)&&(v[f]=_[f]);return v};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var G;(_=>{const a=class{constructor(e,t,n,r){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<a.MIN_VERSION||e>a.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let o=[];for(let c=0;c<this.size;c++)o.push(!1);for(let c=0;c<this.size;c++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(n);if(this.drawCodewords(p),r==-1){let c=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const h=this.getPenaltyScore();h<c&&(r=E,c=h),this.applyMask(E)}}d(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,t){const n=_.QrSegment.makeSegments(e);return a.encodeSegments(n,t)}static encodeBinary(e,t){const n=_.QrSegment.makeBytes(e);return a.encodeSegments([n],t)}static encodeSegments(e,t,n=1,r=40,o=-1,p=!0){if(!(a.MIN_VERSION<=n&&n<=r&&r<=a.MAX_VERSION)||o<-1||o>7)throw new RangeError("Invalid value");let c,E;for(c=n;;c++){const j=a.getNumDataCodewords(c,t)*8,M=s.getTotalBits(e,c);if(M<=j){E=M;break}if(c>=r)throw new RangeError("Data too long")}for(const j of[a.Ecc.MEDIUM,a.Ecc.QUARTILE,a.Ecc.HIGH])p&&E<=a.getNumDataCodewords(c,j)*8&&(t=j);let h=[];for(const j of e){f(j.mode.modeBits,4,h),f(j.numChars,j.mode.numCharCountBits(c),h);for(const M of j.getData())h.push(M)}d(h.length==E);const T=a.getNumDataCodewords(c,t)*8;d(h.length<=T),f(0,Math.min(4,T-h.length),h),f(0,(8-h.length%8)%8,h),d(h.length%8==0);for(let j=236;h.length<T;j^=253)f(j,8,h);let k=[];for(;k.length*8<h.length;)k.push(0);return h.forEach((j,M)=>k[M>>>3]|=j<<7-(M&7)),new a(c,t,k,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)n==0&&r==0||n==0&&r==t-1||n==t-1&&r==0||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let o=0;o<10;o++)n=n<<1^(n>>>9)*1335;const r=(t<<10|n)^21522;d(r>>>15==0);for(let o=0;o<=5;o++)this.setFunctionModule(8,o,w(r,o));this.setFunctionModule(8,7,w(r,6)),this.setFunctionModule(8,8,w(r,7)),this.setFunctionModule(7,8,w(r,8));for(let o=9;o<15;o++)this.setFunctionModule(14-o,8,w(r,o));for(let o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,w(r,o));for(let o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,w(r,o));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;d(t>>>18==0);for(let n=0;n<18;n++){const r=w(t,n),o=this.size-11+n%3,p=Math.floor(n/3);this.setFunctionModule(o,p,r),this.setFunctionModule(p,o,r)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const o=Math.max(Math.abs(r),Math.abs(n)),p=e+r,c=t+n;0<=p&&p<this.size&&0<=c&&c<this.size&&this.setFunctionModule(p,c,o!=2&&o!=4)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,Math.max(Math.abs(r),Math.abs(n))!=1)}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,n=this.errorCorrectionLevel;if(e.length!=a.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");const r=a.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],o=a.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],p=Math.floor(a.getNumRawDataModules(t)/8),c=r-p%r,E=Math.floor(p/r);let h=[];const T=a.reedSolomonComputeDivisor(o);for(let j=0,M=0;j<r;j++){let I=e.slice(M,M+E-o+(j<c?0:1));M+=I.length;const F=a.reedSolomonComputeRemainder(I,T);j<c&&I.push(0),h.push(I.concat(F))}let k=[];for(let j=0;j<h[0].length;j++)h.forEach((M,I)=>{(j!=E-o||I>=c)&&k.push(M[j])});return d(k.length==p),k}drawCodewords(e){if(e.length!=Math.floor(a.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let r=0;r<this.size;r++)for(let o=0;o<2;o++){const p=n-o,E=(n+1&2)==0?this.size-1-r:r;!this.isFunction[E][p]&&t<e.length*8&&(this.modules[E][p]=w(e[t>>>3],7-(t&7)),t++)}}d(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let o=0;o<this.size;o++){let p=!1,c=0,E=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[o][h]==p?(c++,c==5?e+=a.PENALTY_N1:c>5&&e++):(this.finderPenaltyAddHistory(c,E),p||(e+=this.finderPenaltyCountPatterns(E)*a.PENALTY_N3),p=this.modules[o][h],c=1);e+=this.finderPenaltyTerminateAndCount(p,c,E)*a.PENALTY_N3}for(let o=0;o<this.size;o++){let p=!1,c=0,E=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[h][o]==p?(c++,c==5?e+=a.PENALTY_N1:c>5&&e++):(this.finderPenaltyAddHistory(c,E),p||(e+=this.finderPenaltyCountPatterns(E)*a.PENALTY_N3),p=this.modules[h][o],c=1);e+=this.finderPenaltyTerminateAndCount(p,c,E)*a.PENALTY_N3}for(let o=0;o<this.size-1;o++)for(let p=0;p<this.size-1;p++){const c=this.modules[o][p];c==this.modules[o][p+1]&&c==this.modules[o+1][p]&&c==this.modules[o+1][p+1]&&(e+=a.PENALTY_N2)}let t=0;for(const o of this.modules)t=o.reduce((p,c)=>p+(c?1:0),t);const n=this.size*this.size,r=Math.ceil(Math.abs(t*20-n*10)/n)-1;return d(0<=r&&r<=9),e+=r*a.PENALTY_N4,d(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<a.MIN_VERSION||e>a.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return d(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(a.getNumRawDataModules(e)/8)-a.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*a.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let n=1;for(let r=0;r<e;r++){for(let o=0;o<t.length;o++)t[o]=a.reedSolomonMultiply(t[o],n),o+1<t.length&&(t[o]^=t[o+1]);n=a.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(e,t){let n=t.map(r=>0);for(const r of e){const o=r^n.shift();n.push(0),t.forEach((p,c)=>n[c]^=a.reedSolomonMultiply(p,o))}return n}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^(n>>>7)*285,n^=(t>>>r&1)*e;return d(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];d(t<=this.size*3);const n=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(n&&e[0]>=t*4&&e[6]>=t?1:0)+(n&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};let v=a;v.MIN_VERSION=1,v.MAX_VERSION=40,v.PENALTY_N1=3,v.PENALTY_N2=3,v.PENALTY_N3=40,v.PENALTY_N4=10,v.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],v.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],_.QrCode=v;function f(e,t,n){if(t<0||t>31||e>>>t)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function w(e,t){return(e>>>t&1)!=0}function d(e){if(!e)throw new Error("Assertion error")}const i=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)f(n,8,t);return new i(i.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!i.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){const r=Math.min(e.length-n,3);f(parseInt(e.substr(n,r),10),r*3+1,t),n+=r}return new i(i.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!i.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],n;for(n=0;n+2<=e.length;n+=2){let r=i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n))*45;r+=i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n+1)),f(r,11,t)}return n<e.length&&f(i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n)),6,t),new i(i.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:i.isNumeric(e)?[i.makeNumeric(e)]:i.isAlphanumeric(e)?[i.makeAlphanumeric(e)]:[i.makeBytes(i.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)f(e,8,t);else if(e<16384)f(2,2,t),f(e,14,t);else if(e<1e6)f(6,3,t),f(e,21,t);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,t)}static isNumeric(e){return i.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return i.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const o=r.mode.numCharCountBits(t);if(r.numChars>=1<<o)return 1/0;n+=4+o+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)e.charAt(n)!="%"?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let s=i;s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_.QrSegment=s})(G||(G={}));(_=>{(a=>{const v=class{constructor(w,d){this.ordinal=w,this.formatBits=d}};let f=v;f.LOW=new v(0,1),f.MEDIUM=new v(1,0),f.QUARTILE=new v(2,3),f.HIGH=new v(3,2),a.Ecc=f})(_.QrCode||(_.QrCode={}))})(G||(G={}));(_=>{(a=>{const v=class{constructor(w,d){this.modeBits=w,this.numBitsCharCount=d}numCharCountBits(w){return this.numBitsCharCount[Math.floor((w+7)/17)]}};let f=v;f.NUMERIC=new v(1,[10,12,14]),f.ALPHANUMERIC=new v(2,[9,11,13]),f.BYTE=new v(4,[8,16,16]),f.KANJI=new v(8,[8,10,12]),f.ECI=new v(7,[0,0,0]),a.Mode=f})(_.QrSegment||(_.QrSegment={}))})(G||(G={}));var K=G;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Qe={L:K.QrCode.Ecc.LOW,M:K.QrCode.Ecc.MEDIUM,Q:K.QrCode.Ecc.QUARTILE,H:K.QrCode.Ecc.HIGH},Ge=128,Ye="L",$e="#FFFFFF",Ve="#000000",Xe=!1,he=4,Ke=.1;function qe(_,a=0){const v=[];return _.forEach(function(f,w){let d=null;f.forEach(function(i,s){if(!i&&d!==null){v.push(`M${d+a} ${w+a}h${s-d}v1H${d+a}z`),d=null;return}if(s===f.length-1){if(!i)return;d===null?v.push(`M${s+a},${w+a} h1v1H${s+a}z`):v.push(`M${d+a},${w+a} h${s+1-d}v1H${d+a}z`);return}i&&d===null&&(d=s)})}),v.join("")}function We(_,a){return _.slice().map((v,f)=>f<a.y||f>=a.y+a.h?v:v.map((w,d)=>d<a.x||d>=a.x+a.w?w:!1))}function Je(_,a,v,f){if(f==null)return null;const w=v?he:0,d=_.length+w*2,i=Math.floor(a*Ke),s=d/a,e=(f.width||i)*s,t=(f.height||i)*s,n=f.x==null?_.length/2-e/2:f.x*s,r=f.y==null?_.length/2-t/2:f.y*s;let o=null;if(f.excavate){let p=Math.floor(n),c=Math.floor(r),E=Math.ceil(e+n-p),h=Math.ceil(t+r-c);o={x:p,y:c,w:E,h}}return{x:n,y:r,h:t,w:e,excavation:o}}var Ze=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function et(_){const a=_,{value:v,size:f=Ge,level:w=Ye,bgColor:d=$e,fgColor:i=Ve,includeMargin:s=Xe,style:e,imageSettings:t}=a,n=He(a,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),r=t==null?void 0:t.src,o=P.useRef(null),p=P.useRef(null),[c,E]=P.useState(!1);P.useEffect(()=>{if(o.current!=null){const k=o.current,j=k.getContext("2d");if(!j)return;let M=K.QrCode.encodeText(v,Qe[w]).getModules();const I=s?he:0,F=M.length+I*2,L=Je(M,f,s,t),O=p.current,z=L!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;z&&L.excavation!=null&&(M=We(M,L.excavation));const D=window.devicePixelRatio||1;k.height=k.width=f*D;const U=f/F*D;j.scale(U,U),j.fillStyle=d,j.fillRect(0,0,F,F),j.fillStyle=i,Ze?j.fill(new Path2D(qe(M,I))):M.forEach(function(V,H){V.forEach(function(X,q){X&&j.fillRect(q+I,H+I,1,1)})}),z&&j.drawImage(O,L.x+I,L.y+I,L.w,L.h)}}),P.useEffect(()=>{E(!1)},[r]);const h=ce({height:f,width:f},e);let T=null;return r!=null&&(T=J.createElement("img",{src:r,key:r,style:{display:"none"},onLoad:()=>{E(!0)},ref:p})),J.createElement(J.Fragment,null,J.createElement("canvas",ce({style:h,height:f,width:f,ref:o},n)),T)}var pe={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(_,a){(function(f,w){_.exports=w()})(me,function(){return function(){var v={686:function(d,i,s){s.d(i,{default:function(){return A}});var e=s(279),t=s.n(e),n=s(370),r=s.n(n),o=s(817),p=s.n(o);function c(b){try{return document.execCommand(b)}catch{return!1}}var E=function(m){var y=p()(m);return c("cut"),y},h=E;function T(b){var m=document.documentElement.getAttribute("dir")==="rtl",y=document.createElement("textarea");y.style.fontSize="12pt",y.style.border="0",y.style.padding="0",y.style.margin="0",y.style.position="absolute",y.style[m?"right":"left"]="-9999px";var C=window.pageYOffset||document.documentElement.scrollTop;return y.style.top="".concat(C,"px"),y.setAttribute("readonly",""),y.value=b,y}var k=function(m,y){var C=T(m);y.container.appendChild(C);var x=p()(C);return c("copy"),C.remove(),x},j=function(m){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},C="";return typeof m=="string"?C=k(m,y):m instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(m==null?void 0:m.type)?C=k(m.value,y):(C=p()(m),c("copy")),C},M=j;function I(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(y){return typeof y}:I=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},I(b)}var F=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=m.action,C=y===void 0?"copy":y,x=m.container,N=m.target,B=m.text;if(C!=="copy"&&C!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(N!==void 0)if(N&&I(N)==="object"&&N.nodeType===1){if(C==="copy"&&N.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(C==="cut"&&(N.hasAttribute("readonly")||N.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(B)return M(B,{container:x});if(N)return C==="cut"?h(N):M(N,{container:x})},L=F;function O(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(y){return typeof y}:O=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},O(b)}function z(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}function D(b,m){for(var y=0;y<m.length;y++){var C=m[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}function U(b,m,y){return m&&D(b.prototype,m),y&&D(b,y),b}function V(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&H(b,m)}function H(b,m){return H=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C},H(b,m)}function X(b){var m=te();return function(){var C=u(b),x;if(m){var N=u(this).constructor;x=Reflect.construct(C,arguments,N)}else x=C.apply(this,arguments);return q(this,x)}}function q(b,m){return m&&(O(m)==="object"||typeof m=="function")?m:Y(b)}function Y(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function u(b){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},u(b)}function g(b,m){var y="data-clipboard-".concat(b);if(m.hasAttribute(y))return m.getAttribute(y)}var S=function(b){V(y,b);var m=X(y);function y(C,x){var N;return z(this,y),N=m.call(this),N.resolveOptions(x),N.listenClick(C),N}return U(y,[{key:"resolveOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof x.action=="function"?x.action:this.defaultAction,this.target=typeof x.target=="function"?x.target:this.defaultTarget,this.text=typeof x.text=="function"?x.text:this.defaultText,this.container=O(x.container)==="object"?x.container:document.body}},{key:"listenClick",value:function(x){var N=this;this.listener=r()(x,"click",function(B){return N.onClick(B)})}},{key:"onClick",value:function(x){var N=x.delegateTarget||x.currentTarget,B=this.action(N)||"copy",W=L({action:B,container:this.container,target:this.target(N),text:this.text(N)});this.emit(W?"success":"error",{action:B,text:W,trigger:N,clearSelection:function(){N&&N.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(x){return g("action",x)}},{key:"defaultTarget",value:function(x){var N=g("target",x);if(N)return document.querySelector(N)}},{key:"defaultText",value:function(x){return g("text",x)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(x){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return M(x,N)}},{key:"cut",value:function(x){return h(x)}},{key:"isSupported",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],N=typeof x=="string"?[x]:x,B=!!document.queryCommandSupported;return N.forEach(function(W){B=B&&!!document.queryCommandSupported(W)}),B}}]),y}(t()),A=S},828:function(d){var i=9;if(typeof Element<"u"&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}function e(t,n){for(;t&&t.nodeType!==i;){if(typeof t.matches=="function"&&t.matches(n))return t;t=t.parentNode}}d.exports=e},438:function(d,i,s){var e=s(828);function t(o,p,c,E,h){var T=r.apply(this,arguments);return o.addEventListener(c,T,h),{destroy:function(){o.removeEventListener(c,T,h)}}}function n(o,p,c,E,h){return typeof o.addEventListener=="function"?t.apply(null,arguments):typeof c=="function"?t.bind(null,document).apply(null,arguments):(typeof o=="string"&&(o=document.querySelectorAll(o)),Array.prototype.map.call(o,function(T){return t(T,p,c,E,h)}))}function r(o,p,c,E){return function(h){h.delegateTarget=e(h.target,p),h.delegateTarget&&E.call(o,h)}}d.exports=n},879:function(d,i){i.node=function(s){return s!==void 0&&s instanceof HTMLElement&&s.nodeType===1},i.nodeList=function(s){var e=Object.prototype.toString.call(s);return s!==void 0&&(e==="[object NodeList]"||e==="[object HTMLCollection]")&&"length"in s&&(s.length===0||i.node(s[0]))},i.string=function(s){return typeof s=="string"||s instanceof String},i.fn=function(s){var e=Object.prototype.toString.call(s);return e==="[object Function]"}},370:function(d,i,s){var e=s(879),t=s(438);function n(c,E,h){if(!c&&!E&&!h)throw new Error("Missing required arguments");if(!e.string(E))throw new TypeError("Second argument must be a String");if(!e.fn(h))throw new TypeError("Third argument must be a Function");if(e.node(c))return r(c,E,h);if(e.nodeList(c))return o(c,E,h);if(e.string(c))return p(c,E,h);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(c,E,h){return c.addEventListener(E,h),{destroy:function(){c.removeEventListener(E,h)}}}function o(c,E,h){return Array.prototype.forEach.call(c,function(T){T.addEventListener(E,h)}),{destroy:function(){Array.prototype.forEach.call(c,function(T){T.removeEventListener(E,h)})}}}function p(c,E,h){return t(document.body,c,E,h)}d.exports=n},817:function(d){function i(s){var e;if(s.nodeName==="SELECT")s.focus(),e=s.value;else if(s.nodeName==="INPUT"||s.nodeName==="TEXTAREA"){var t=s.hasAttribute("readonly");t||s.setAttribute("readonly",""),s.select(),s.setSelectionRange(0,s.value.length),t||s.removeAttribute("readonly"),e=s.value}else{s.hasAttribute("contenteditable")&&s.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(s),n.removeAllRanges(),n.addRange(r),e=n.toString()}return e}d.exports=i},279:function(d){function i(){}i.prototype={on:function(s,e,t){var n=this.e||(this.e={});return(n[s]||(n[s]=[])).push({fn:e,ctx:t}),this},once:function(s,e,t){var n=this;function r(){n.off(s,r),e.apply(t,arguments)}return r._=e,this.on(s,r,t)},emit:function(s){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[s]||[]).slice(),n=0,r=t.length;for(n;n<r;n++)t[n].fn.apply(t[n].ctx,e);return this},off:function(s,e){var t=this.e||(this.e={}),n=t[s],r=[];if(n&&e)for(var o=0,p=n.length;o<p;o++)n[o].fn!==e&&n[o].fn._!==e&&r.push(n[o]);return r.length?t[s]=r:delete t[s],this}},d.exports=i,d.exports.TinyEmitter=i}},f={};function w(d){if(f[d])return f[d].exports;var i=f[d]={exports:{}};return v[d](i,i.exports,w),i.exports}return function(){w.n=function(d){var i=d&&d.__esModule?function(){return d.default}:function(){return d};return w.d(i,{a:i}),i}}(),function(){w.d=function(d,i){for(var s in i)w.o(i,s)&&!w.o(d,s)&&Object.defineProperty(d,s,{enumerable:!0,get:i[s]})}}(),function(){w.o=function(d,i){return Object.prototype.hasOwnProperty.call(d,i)}}(),w(686)}().default})})(pe);var tt=pe.exports;const ue=({fill:_,onClick:a})=>l.jsx("svg",{width:"13",height:"14",viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:a,children:l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.9498 7.04945L0 11.9993L1.41421 13.4135L6.36401 8.46367L11.3138 13.4135L12.728 11.9993L7.77823 7.04945L12.7279 2.09976L11.3137 0.685547L6.36401 5.63524L1.41432 0.685547L0.0001055 2.09976L4.9498 7.04945Z",fill:_})}),Q=({label:_,children:a,required:v})=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:R.divider}),l.jsxs("div",{className:ne("flex-container flex-center flex-no-wrap",R.inputContainer,v&&R.required),children:[l.jsx("span",{className:R.label,children:_}),l.jsx("div",{className:"flex-container flex-column flex-grow",children:a})]})]}),it=({closeMethod:_,previewMethod:a})=>{const[v,f]=P.useState(""),[w,d]=P.useState(""),[i,s]=P.useState({title:"",sounds:[],pure:!1,icons:new Array(10).fill(0).map(()=>({name:ge(4),content:"",clickSound:"",tripleSound:""}))});function e(u,g){["sounds","icons"].includes(u)?Array.isArray(g)?s({...i,[u]:[...g]}):s({...i,[u]:[...i[u],g]}):s({...i,[u]:g})}P.useEffect(()=>{console.log(i)},[i]);const[t,n]=P.useState({name:"",src:""}),[r,o]=P.useState(""),p=(u,g)=>{n({...t,[u]:g})},c=()=>{o("");let u="";Z.test(t.src)||(u="请输入https链接"),t.name||(u="请输入音效名称"),i.sounds.find(g=>g.name===t.name)&&(u="名称已存在"),u?o(u):(e("sounds",t),n({name:"",src:""}))},E=u=>{const g=i.sounds[u].name,S=i.icons.findIndex(({clickSound:b,tripleSound:m})=>[b,m].includes(g));if(S!==-1)return o(`第${S+1}项图标有使用该音效，请取消后再删除`);const A=i.sounds.slice();A.splice(u,1),e("sounds",A)},[h,T]=P.useState(""),[k,j]=P.useState(""),[M,I]=P.useState(new Array(10).fill("")),F=localStorage.getItem(re),[L,O]=P.useState(F===null?!0:F==="true");P.useEffect(()=>{localStorage.setItem(re,L+"")},[L]);const z=(u,g)=>new Array(10).fill("").map((S,A)=>u===A?g:M[A]),D=async({type:u,file:g,idx:S})=>{if(g)switch(u){case"bgm":if(T(""),L&&g.size>80*1024)return T("请选择80k以内全损音质的文件");$(g).then(A=>{e("bgm",A)}).catch(A=>{T(A)});break;case"background":j("");try{const A=L?await se({canvas:await ae({imgSrc:await $(g)}),maxFileSize:20480}):g,b=await $(A);e("background",b)}catch(A){j(A)}break;case"sound":if(o(""),L&&g.size>10*1024)return o("请选择10k以内的音频文件");$(g).then(A=>{p("src",A)}).catch(A=>{o(A)});break;case"icon":if(S==null)return;I(z(S,""));try{const A=L?await se({canvas:await ae({imgSrc:await $(g)}),maxFileSize:4096}):g,b=await $(A);e("icons",i.icons.map((m,y)=>y===S?{...m,content:b}:m))}catch(A){I(z(S,A))}break}},U=(u,g,S)=>{const A=i.icons.map((b,m)=>m===S?{...b,[u]:g}:b);e("icons",A)};P.useEffect(()=>{const u=localStorage.getItem(oe);u&&d(`${location.origin}?customTheme=${u}`);try{const g=localStorage.getItem(ie);if(g){const S=JSON.parse(g);typeof S=="object"&&setTimeout(()=>{s(S)},300)}}catch(g){console.log(g)}},[]);const V=async()=>{if(!i.title)return Promise.reject("请输入标题");if(i.bgm&&!Z.test(i.bgm))return Promise.reject("bgm请输入https链接");if(i.background&&!Z.test(i.background))return Promise.reject("背景图请输入https链接");if(!i.maxLevel||i.maxLevel<5)return Promise.reject("请输入大于5的关卡数");const u=M.find(S=>!!S);if(u)return Promise.reject(`图标素材有错误：${u}`);const g=i.icons.findIndex(S=>!S.content);return g!==-1?(I(z(g,"请填写链接")),Promise.reject(`第${g+1}图标素材未完成`)):Promise.resolve("")},H=()=>{f(""),V().then(()=>{const u=JSON.parse(JSON.stringify(i));ye(u),a(u),localStorage.setItem(ie,JSON.stringify(i)),_()}).catch(u=>{f(u)})},[X,q]=P.useState(!1),[Y,te]=P.useState(0);return P.useEffect(()=>{e("pure",Y%5===0&&Y!==0)},[Y]),l.jsxs("div",{className:ne(R.dialog),children:[l.jsx("div",{className:R.closeBtn,onClick:_,children:l.jsx(ue,{fill:"#fff"})}),l.jsx("h2",{children:"自定义主题"}),l.jsxs("p",{style:{color:"red"},children:["后台服务到期，分享链接功能已停用，有需要的同学参考",l.jsx("a",{href:"https://github.com/StreakingMan/solvable-sheep-game/blob/master/diy/README.md",target:"_blank",rel:"noopener noreferrer",children:"👉这里👈"}),"自行部署，感谢支持！🙏"]}),l.jsx(Q,{label:"标题",required:!0,children:l.jsx("input",{placeholder:"请输入标题",value:i.title,onChange:u=>e("title",u.target.value)})}),l.jsx(Q,{label:"描述",children:l.jsx("input",{placeholder:"请输入描述",value:i.desc||"",onChange:u=>e("desc",u.target.value)})}),l.jsxs(Q,{label:"BGM",children:[l.jsx("div",{className:R.tip,children:"接口上传体积有限制，上传文件请全力压缩到80k以下，推荐使用外链"}),l.jsx("input",{type:"file",accept:".mp3",onChange:u=>{var g;return D({type:"bgm",file:(g=u.target.files)==null?void 0:g[0]})}}),h&&l.jsx("div",{className:R.errorTip,children:h}),l.jsx("input",{placeholder:"或者输入https外链",value:i.bgm||"",onChange:u=>e("bgm",u.target.value)}),i.bgm&&l.jsx("audio",{src:i.bgm,controls:!0})]}),l.jsxs(Q,{label:"背景图",children:[l.jsx("div",{className:R.tip,children:"接口上传体积有限制，上传的图片将会被严重压缩，推荐使用外链"}),l.jsx("input",{type:"file",accept:".jpg,.png,.gif",onChange:u=>{var g;return D({type:"background",file:(g=u.target.files)==null?void 0:g[0]})}}),k&&l.jsx("div",{className:R.errorTip,children:k}),l.jsxs("div",{className:"flex-container flex-center",children:[l.jsx("input",{placeholder:"或者输入https外链",value:i.background||"",onChange:u=>e("background",u.target.value)}),i.background&&l.jsx("img",{alt:"加载失败",src:i.background,className:R.imgPreview})]}),l.jsxs("div",{className:"flex-container flex-center flex-wrap",children:[l.jsxs("div",{className:"flex-spacer flex-container flex-center",children:[l.jsx("span",{children:"毛玻璃"}),l.jsx("input",{type:"checkbox",checked:!!i.backgroundBlur,onChange:u=>e("backgroundBlur",u.target.checked)})]}),l.jsxs("div",{className:"flex-spacer flex-container flex-center",children:[l.jsx("span",{children:"深色"}),l.jsx("input",{type:"checkbox",checked:!!i.dark,onChange:u=>e("dark",u.target.checked)})]}),l.jsxs("div",{className:"flex-spacer flex-container flex-center",children:[l.jsx("span",{children:"纯色"}),l.jsx("input",{type:"color",value:i.backgroundColor||"#ffffff",onChange:u=>e("backgroundColor",u.target.value)})]})]}),l.jsx("div",{className:R.tip,children:"使用图片或者纯色作为背景，图片可开启毛玻璃效果。如果你使用了深色的图片和颜色，请开启深色模式，此时标题等文字将变为亮色"})]}),l.jsx(Q,{label:"关卡数",required:!0,children:l.jsx("input",{type:"number",placeholder:"最低5关，最高...理论上无限",value:i.maxLevel||"",onChange:u=>e("maxLevel",Number(u.target.value))})}),l.jsxs(Q,{label:"音效素材",children:[l.jsx("div",{className:"flex-container flex-left-center",children:i.sounds.map((u,g)=>l.jsxs("div",{className:R.soundItem,children:[l.jsx("audio",{src:u.src,controls:!0}),l.jsxs("div",{className:R.inner,children:[l.jsx("span",{children:u.name}),l.jsx(ue,{fill:"#fff",onClick:()=>E(g)})]})]},u.name))}),l.jsx("input",{placeholder:"输入音效名称",value:t.name,onChange:u=>p("name",u.target.value)}),l.jsx("div",{className:R.tip,children:"接口上传体积有限制，上传文件请全力压缩到10k以下，推荐使用外链"}),l.jsx("input",{type:"file",accept:".mp3",onChange:u=>{var g;return D({type:"sound",file:(g=u.target.files)==null?void 0:g[0]})}}),l.jsx("input",{placeholder:"或者输入https外链",value:t.src,onChange:u=>p("src",u.target.value)}),r&&l.jsx("div",{className:R.errorTip,children:r}),l.jsx("button",{onClick:c,children:"添加音效"})]}),l.jsx(Q,{label:"图标素材",required:!0,children:l.jsx("div",{className:R.tip,children:"接口上传体积有限制，上传的图片将会被严重压缩，推荐使用外链"})}),i.icons.map((u,g)=>l.jsxs("div",{className:R.iconInputGroup,children:[l.jsx("img",{alt:"",className:R.iconPreview,src:u.content}),l.jsxs("div",{className:R.iconInput,children:[l.jsx("input",{type:"file",accept:".jpg,.png,.gif",onChange:S=>{var A;return D({type:"icon",file:(A=S.target.files)==null?void 0:A[0],idx:g})}}),l.jsxs("div",{className:"flex-container flex-center flex-no-wrap",style:{wordBreak:"keep-all"},children:[l.jsx("input",{placeholder:"或者输入https外链",value:i.icons[g].content,onBlur:S=>{I(z(g,Z.test(S.target.value)?"":"请输入https外链"))},onChange:S=>U("content",S.target.value,g)}),M[g]&&l.jsx("div",{className:R.errorTip,children:M[g]})]}),l.jsxs("div",{className:"flex-container",children:[l.jsxs("select",{className:"flex-grow",value:i.icons[g].clickSound,onChange:S=>U("clickSound",S.target.value,g),children:[l.jsx("option",{value:"",children:"默认点击音效"}),i.sounds.map(S=>l.jsx("option",{value:S.name,children:S.name},S.name))]}),l.jsxs("select",{className:"flex-grow",value:i.icons[g].tripleSound,onChange:S=>U("tripleSound",S.target.value,g),children:[l.jsx("option",{value:"",children:"默认三连音效"}),i.sounds.map(S=>l.jsx("option",{value:S.name,children:S.name},S.name))]})]})]})]},u.name)),w&&l.jsxs("div",{className:"flex-container flex-center flex-column",children:[l.jsx(et,{id:"qrCode",value:w,size:300,className:ne(R.qrCode,X&&R.uploading)}),l.jsx("button",{onClick:()=>ve("qrCode",`${i.title}-${localStorage.getItem(oe)}`),className:"primary",children:"下载二维码"}),l.jsx("div",{style:{fontSize:12},children:w}),l.jsx("button",{onClick:()=>tt.copy(w),className:"primary",children:"复制链接"})]}),l.jsxs("div",{className:R.tip,children:["接口上传内容总体积有限制，上传文件失败请尝试进一步压缩文件，推荐使用外链（自行搜索【免费图床】【免费mp3外链】【对象存储服务】等关键词）。 本地整活，勾选右侧关闭文件大小校验👉",l.jsx("input",{type:"checkbox",checked:!L,onChange:u=>O(!u.target.checked)}),"(谨慎操作，单文件不超过1M为宜，文件过大可能导致崩溃，介时请刷新浏览器)"]}),v&&l.jsx("div",{className:R.errorTip,children:v}),i.pure&&l.jsx("div",{className:R.tip,children:"🎉🎉🎉恭喜发现彩蛋，生成的主题将开启纯净模式～"}),l.jsx(Ee,{onClick:()=>te(Y+1)}),l.jsx("div",{className:"flex-container",children:l.jsx("button",{className:"primary flex-grow",onClick:H,children:"保存并预览"})})]})};export{it as default};
